import{_ as K,Z,a as g,b as M,c as Q,d as X,T as P}from"./util.time-3d95bfc0.js";import{z as E,e as B,k as y,o as f,c as D,i as t,l as a,v as i,I as G,D as q,G as z,t as h,H as Y,C as O,A as ee,b as v,F as L,J as N}from"./index-be6ac54a.js";import{a as I}from"./server-20862913.js";import{Z as te}from"./ZySearchForm-8c09dce6.js";import{i as j,h as ae}from"./util.common-5df96f70.js";import"./_plugin-vue_export-helper-c27b6911.js";const se=l=>I.post("/v1/sys/permissions/create",l),de=l=>I.post("/v1/sys/permissions/update",l),W=l=>I.post("/v1/sys/permissions/delete",l),re=l=>I.post("/v1/sys/permissions/stop",l),le={class:"zy-get"},ue={__name:"get-permissions-info",props:{updateData:{type:Object,default:()=>{}}},emits:["close"],setup(l,{emit:x}){const s={style:{width:"100px"}},c={span:14},r=E({form:{auth:!1,autoSon:!1}}),S=l,V=x,U=B(),T=B(!S.updateData);T.value||(r.form=S.updateData||{});const w=async()=>{try{const A=await U.value.validateFields();T.value||delete r.form.password,(T.value?se:de)(G(r.form)).then(m=>{q.success("操作成功"),V("close",!0)})}catch(A){console.log("Failed:",A)}},F=()=>{z("还没保存数据，确认退出?").then(A=>{A&&V("close")})};return(A,u)=>{const m=y("a-input"),k=y("a-form-item"),b=y("a-radio"),e=y("a-radio-group"),d=y("a-alert"),p=y("a-form");return f(),D("section",le,[t(p,{model:r.form,class:"zy-form","label-col":s,ref_key:"formRef",ref:U,"wrapper-col":c},{default:a(()=>[t(k,{label:"权限名称",name:"name",rules:[{required:!0,message:"请输入权限名称!"}]},{default:a(()=>[t(m,{value:r.form.name,"onUpdate:value":u[0]||(u[0]=n=>r.form.name=n),allowClear:"",placeholder:"权限名称：增加"},null,8,["value"])]),_:1}),t(k,{label:"权限标识",name:"key",rules:[{required:!0,message:"请输入权限标识!"}]},{default:a(()=>[t(m,{value:r.form.key,"onUpdate:value":u[1]||(u[1]=n=>r.form.key=n),allowClear:"",placeholder:"权限标识：sys:user / sys:user:create"},null,8,["value"])]),_:1}),t(k,{label:"父级标识",name:"parent_key"},{default:a(()=>[t(m,{value:r.form.parent_key,"onUpdate:value":u[2]||(u[2]=n=>r.form.parent_key=n),allowClear:"",placeholder:"父级标识：sys"},null,8,["value"])]),_:1}),t(k,{label:"排序",name:"sortOrder"},{default:a(()=>[t(m,{value:r.form.sortOrder,"onUpdate:value":u[3]||(u[3]=n=>r.form.sortOrder=n),allowClear:"",placeholder:"排序:值越大越往后"},null,8,["value"])]),_:1}),t(k,{label:"权限按钮",name:"auth"},{default:a(()=>[t(e,{value:r.form.auth,"onUpdate:value":u[4]||(u[4]=n=>r.form.auth=n),name:"auth"},{default:a(()=>[t(b,{value:!0},{default:a(()=>[i("是")]),_:1}),t(b,{value:!1},{default:a(()=>[i("否")]),_:1})]),_:1},8,["value"])]),_:1}),t(k,{label:"生成子级",name:"autoSon"},{default:a(()=>[t(e,{value:r.form.autoSon,"onUpdate:value":u[5]||(u[5]=n=>r.form.autoSon=n),name:"auth"},{default:a(()=>[t(b,{value:!0},{default:a(()=>[i("是")]),_:1}),t(b,{value:!1},{default:a(()=>[i("否")]),_:1})]),_:1},8,["value"]),t(d,{message:"生成子级:自动生成增删改查权限按钮"})]),_:1})]),_:1},8,["model"]),t(K,{onSave:w,onClose:F})])}}},oe={class:"zy-view"},ne={__name:"view-permissions-info",props:{viewData:{type:Object,default:()=>{}}},emits:["close"],setup(l,{emit:x}){return(s,c)=>(f(),D("section",oe,[t(g,null,{default:a(()=>[t(Z,{label:"权限名称"},{default:a(()=>[i(h(l.viewData.name),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(Z,{label:"权限键"},{default:a(()=>[i(h(l.viewData.key),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(Z,{label:"父级"},{default:a(()=>[i(h(l.viewData.parent_key),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(Z,{label:"按钮"},{default:a(()=>[i(h(l.viewData.auth),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(Z,{label:"排序"},{default:a(()=>[i(h(l.viewData.sortOrder),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(Z,{label:"状态"},{default:a(()=>[i(h(l.viewData.status),1)]),_:1})]),_:1})]))}},be={__name:"dir-permissions-info",setup(l){const x=[{title:"权限名称",width:275,dataIndex:"name",key:"name"},{title:"权限标识",width:275,dataIndex:"key",key:"key"},{title:"父级标识",dataIndex:"parent_key",key:"parent_key"},{title:"权限按钮",dataIndex:"auth",key:"auth",align:"center"},{title:"排序",dataIndex:"sortOrder",key:"sortOrder",align:"center"},{title:"状态",width:100,dataIndex:"status",key:"status",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",width:225,key:"action",align:"center",fixed:"right"}],s=E({show:{add:!1,edit:!1,view:!1},editTitle:"编辑",activeComponent:null,updateData:{},resetData:{},viewData:{},query:{params:{},pagination:{current:1,pageSize:10,total:0,hideOnSinglePage:!0},sort:{columnKey:"sortOrder",order:"ascend"}},dataList:[],loading:{spinning:!1,tip:"加载中"}}),c=(e=1)=>{s.query.pagination.current=e,w()},r=()=>{c()},S=({current:e,pageSize:d})=>{s.query.pagination=E({current:e,pageSize:d}),w()},V=({columnKey:e,order:d})=>{s.query.sort=E({current:e,order:d}),w()},U=e=>{re({_id:e._id}).then(d=>{q.success(e.status?"启用成功":"停用成功"),c()})};function T(e){e.createdAt=P.formatTime(e.createdAt),e.updatedAt=P.formatTime(e.updatedAt),e.children&&e.children.forEach(d=>{T(d)})}const w=()=>{s.loading.spinning=!0,G(s.query);let e={status:1,message:"Success.",data:{result:[{_id:"64a6767b2f517ae48b51de4a",name:"首页",key:"index",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:27.735Z",updatedAt:"2023-07-18T03:16:59.334Z",disabled:!1},{_id:"64a676872f517ae48b51de50",name:"系统管理",key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:39.650Z",updatedAt:"2023-07-06T13:26:57.493Z",disabled:!1,children:[{_id:"64a676942f517ae48b51de56",name:"用户管理",key:"sys:users",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:52.375Z",updatedAt:"2023-09-11T01:55:57.012Z",disabled:!1,children:[{_id:"64a676a62f517ae48b51de5c",name:"查询",key:"sys:users:list",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:10.271Z",updatedAt:"2023-07-09T13:53:59.963Z",disabled:!1},{_id:"64a676b72f517ae48b51de62",name:"增加",key:"sys:users:create",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:27.173Z",updatedAt:"2023-07-06T14:41:34.107Z",disabled:!1},{_id:"64a676ca2f517ae48b51de68",name:"删除",key:"sys:users:delete",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:46.180Z",updatedAt:"2023-07-06T14:41:40.693Z",disabled:!1},{_id:"64a676d82f517ae48b51de6e",name:"重置密码",key:"sys:users:reset",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:10:00.965Z",updatedAt:"2023-07-06T14:41:54.406Z",disabled:!1}]},{_id:"64a7799604246540f7286663",name:"权限管理",key:"sys:permissions",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T02:33:58.142Z",updatedAt:"2023-07-07T02:33:58.142Z",disabled:!1,children:[{_id:"64a77a0104246540f7286681",name:"停用",key:"sys:permissions:stop",parent_key:"sys:permissions",auth:!0,sortOrder:null,status:!0,createdAt:"2023-07-07T02:35:45.300Z",updatedAt:"2023-07-07T02:35:45.300Z",disabled:!1},{_id:"64a6eca8bbab6245325057ee",name:"查询",key:"sys:permissions:list",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:32:40.326Z",updatedAt:"2023-07-06T16:32:40.326Z",disabled:!1},{_id:"64a6ecc0bbab6245325057f4",name:"增加",key:"sys:permissions:create",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:33:04.782Z",updatedAt:"2023-07-06T16:33:04.782Z",disabled:!1},{_id:"64a6ecdebbab6245325057fa",name:"删除",key:"sys:permissions:delete",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:33:34.613Z",updatedAt:"2023-07-06T16:33:34.613Z",disabled:!1},{_id:"64a6ecffbbab624532505800",name:"修改",key:"sys:permissions:update",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:34:07.219Z",updatedAt:"2023-07-06T16:34:07.219Z",disabled:!1}]},{_id:"64a7cbe6b85fe16110610cf5",name:"操作日志",key:"sys:users_opt_logs",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1,children:[{_id:"64a7cbe6b85fe16110610cf6",name:"查询",key:"sys:users_opt_logs:list",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf7",name:"增加",key:"sys:users_opt_logs:create",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf8",name:"删除",key:"sys:users_opt_logs:delete",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf9",name:"更新",key:"sys:users_opt_logs:update",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7d30aacc04191a405fb61",name:"批量删除",key:"sys:users_opt_logs:deleteAll",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:55:38.696Z",updatedAt:"2023-07-09T13:57:08.966Z",disabled:!1},{_id:"64aabc5804fd30a2ac31c2a9",name:"导出",key:"sys:users_opt_logs:export",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-09T13:55:36.412Z",updatedAt:"2023-07-09T13:55:36.412Z"},{_id:"64aabc6b04fd30a2ac31c2b5",name:"导入",key:"sys:users_opt_logs:import",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-09T13:55:55.856Z",updatedAt:"2023-07-09T13:55:55.856Z"}]},{_id:"64b4c7dad6ac9bf24cecc6d1",name:"资源管理",key:"sys:resources",parent_key:"sys",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.912Z",updatedAt:"2023-07-17T04:47:22.912Z",children:[{_id:"64b4c7dad6ac9bf24cecc6d2",name:"查询",key:"sys:resources:list",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d3",name:"增加",key:"sys:resources:create",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d4",name:"删除",key:"sys:resources:delete",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d5",name:"更新",key:"sys:resources:update",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"}]},{_id:"64a6f171d2fac9dd58d3025c",name:"角色管理",key:"sys:roles",parent_key:"sys",auth:!1,sortOrder:1,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-09-11T01:56:03.256Z",disabled:!1,children:[{_id:"64a6f171d2fac9dd58d3025d",name:"查询",key:"sys:roles:list",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d3025e",name:"增加",key:"sys:roles:create",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d3025f",name:"删除",key:"sys:roles:delete",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d30260",name:"更新",key:"sys:roles:update",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1}]}]},{_id:"64a6bce2210858fb6ec32f55",name:"开发工具",key:"dev",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T13:08:50.188Z",updatedAt:"2023-07-06T13:27:34.278Z",disabled:!1,children:[{_id:"64a784d104a94eaa96595abb",name:"代码生成",key:"dev:codes",parent_key:"dev",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T03:21:53.616Z",disabled:!1,children:[{_id:"64a784d104a94eaa96595abc",name:"查询",key:"dev:codes:list",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T03:21:53.616Z",disabled:!1},{_id:"64a784d104a94eaa96595abd",name:"创建",key:"dev:codes:singleCurdFrontAndBack",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T05:28:34.029Z",disabled:!1},{_id:"64a784d104a94eaa96595abe",name:"删除",key:"dev:codes:delete",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.617Z",updatedAt:"2023-07-07T03:21:53.617Z",disabled:!1},{_id:"64a784d104a94eaa96595abf",name:"批量删除",key:"dev:codes:deleteAll",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.617Z",updatedAt:"2023-07-07T05:28:50.417Z",disabled:!1}]},{_id:"64a6ec18bbab6245325057dc",name:"图标列表",key:"dev:icon",parent_key:"dev",auth:!1,sortOrder:1,status:!0,createdAt:"2023-07-06T16:30:16.901Z",updatedAt:"2023-07-07T03:22:12.747Z",disabled:!1}]},{_id:"64a7a633f97cdac3cb1bbbcf",name:"页面示例",key:"pages",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:44:19.405Z",updatedAt:"2023-07-07T05:44:19.405Z",disabled:!1,children:[{_id:"64a7a9dda971facd04696235",name:"综合页面",key:"pages:all",parent_key:"pages",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:59:57.159Z",updatedAt:"2023-07-07T05:59:57.159Z",disabled:!1}]},{_id:"64a7a67af97cdac3cb1bbbee",name:"组件示例",key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:30.168Z",updatedAt:"2023-07-07T05:45:30.168Z",disabled:!1,children:[{_id:"64a7a695f97cdac3cb1bbbf4",name:"图表地图",key:"components:echart",parent_key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:45:57.351Z",disabled:!1,children:[{_id:"64a7a695f97cdac3cb1bbbf5",name:"贵州地图",key:"components:echart:guizhouMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:19.623Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf6",name:"中国地图",key:"components:echart:chinaMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:33.902Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf7",name:"世界地图",key:"components:echart:worldMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:44.697Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf8",name:"折线图",key:"components:echart:line",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.352Z",updatedAt:"2023-07-07T05:46:56.584Z",disabled:!1},{_id:"64a7a6e1f97cdac3cb1bbc16",name:"饼图",key:"components:echart:pie",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:47:13.846Z",updatedAt:"2023-07-07T05:47:20.216Z",disabled:!1}]},{_id:"64a7ab9da971facd04696299",name:"富文本",key:"components:editor",parent_key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:07:25.737Z",updatedAt:"2023-07-07T06:07:25.737Z",disabled:!1,children:[{_id:"64a7abb7a971facd0469629f",name:"Tinymce",key:"components:editor:Tinymce",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:07:51.383Z",updatedAt:"2023-07-07T06:08:04.393Z",disabled:!1},{_id:"64a7abe1a971facd046962ab",name:"Vditor",key:"components:editor:Vditor",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:08:33.975Z",updatedAt:"2023-07-07T06:08:33.975Z",disabled:!1},{_id:"64a7abefa971facd046962b1",name:"VMdEditor",key:"components:editor:VMdEditor",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:08:47.735Z",updatedAt:"2023-07-07T06:08:47.735Z",disabled:!1}]}]},{_id:"64cfada9c3794728bc32ac40",name:"博客管理",key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:26:49.389Z",updatedAt:"2023-08-06T14:26:49.389Z",children:[{_id:"64cfade2c3794728bc32ac4c",name:"博文管理",key:"blog:blog_articles",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.488Z",updatedAt:"2023-08-06T14:27:46.488Z",children:[{_id:"64cfade2c3794728bc32ac4d",name:"查询",key:"blog:blog_articles:list",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.488Z",updatedAt:"2023-08-06T14:27:46.488Z"},{_id:"64cfade2c3794728bc32ac4e",name:"增加",key:"blog:blog_articles:create",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"},{_id:"64cfade2c3794728bc32ac4f",name:"删除",key:"blog:blog_articles:delete",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"},{_id:"64cfade2c3794728bc32ac50",name:"更新",key:"blog:blog_articles:update",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"}]},{_id:"64cfae09c3794728bc32ac5c",name:"作品管理",key:"blog:portfolios",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z",children:[{_id:"64cfae09c3794728bc32ac5d",name:"查询",key:"blog:portfolios:list",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac5e",name:"增加",key:"blog:portfolios:create",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac5f",name:"删除",key:"blog:portfolios:delete",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac60",name:"更新",key:"blog:portfolios:update",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.624Z",updatedAt:"2023-08-06T14:28:25.624Z"}]},{_id:"64d1d19153d1c684a73c8412",name:"留言管理",key:"blog:messages",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.901Z",updatedAt:"2023-08-08T05:24:33.901Z",children:[{_id:"64d1d19153d1c684a73c8413",name:"查询",key:"blog:messages:list",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.901Z",updatedAt:"2023-08-08T05:24:33.901Z"},{_id:"64d1d19153d1c684a73c8414",name:"增加",key:"blog:messages:create",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"},{_id:"64d1d19153d1c684a73c8415",name:"删除",key:"blog:messages:delete",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"},{_id:"64d1d19153d1c684a73c8416",name:"更新",key:"blog:messages:update",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"}]}]},{_id:"64fe8780857575ebf222ac7d",name:"测试示例",key:"test",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:20:32.189Z",updatedAt:"2023-09-11T03:20:32.189Z",children:[{_id:"64fe88bc857575ebf222ac89",name:"测试页面",key:"test:page",parent_key:"test",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:25:48.668Z",updatedAt:"2023-09-11T03:25:48.668Z",children:[{_id:"64fe88bc857575ebf222ac8a",name:"查询",key:"test:page:list",parent_key:"test:page",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:25:48.668Z",updatedAt:"2023-09-11T03:25:48.668Z"},{_id:"64fe88bc857575ebf222ac8b",name:"增加",key:"test:page:create",parent_key:"test:page",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:25:48.668Z",updatedAt:"2023-09-11T03:25:48.668Z"},{_id:"64fe88bc857575ebf222ac8c",name:"删除",key:"test:page:delete",parent_key:"test:page",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:25:48.669Z",updatedAt:"2023-09-11T03:25:48.669Z"},{_id:"64fe88bc857575ebf222ac8d",name:"更新",key:"test:page:update",parent_key:"test:page",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-11T03:25:48.669Z",updatedAt:"2023-09-11T03:25:48.669Z"}]}]}]},time:1694589329318};s.loading.spinning=!1;let d=e.data.result;d.forEach(p=>{T(p)}),s.dataList=d},F=(e,d,p)=>{j(e)||S(e),j(p)||V(p)},A=e=>{s.show.view=!0,s.viewData=e},u=e=>{s.show.edit=!0,e&&e._id?s.editTitle="修改权限":s.editTitle="添加权限",s.updateData=e};function m(e,d=1){return(e.match(/:/g)||[]).length===d}const k=e=>{m(e.key,0)||m(e.key,1)?z("确认删除该条数据以及所有子级数据?").then(d=>{d&&W(e).then(p=>{q.success("删除成功"),c()})}):z("确认删除该条数据?").then(d=>{d&&W(e).then(p=>{q.success("删除成功"),c()})})},b=e=>{s.show.reset=!1,s.show.view=!1,s.show.edit=!1,e&&c()};return c(),(e,d)=>{const p=y("a-input"),n=y("a-form-item"),H=y("a-switch"),$=y("a-tag"),J=y("a-table"),R=Y("copy");return f(),D("section",null,[t(te,{formValue:s.query.params,onSubmit:c,onReset:r},{default:a(()=>[t(n,{name:"name"},{default:a(()=>[t(p,{value:s.query.params.name,"onUpdate:value":d[0]||(d[0]=_=>s.query.params.name=_),allowClear:"",placeholder:"请输入权限名称",onPressEnter:c,autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},8,["formValue"]),t(Q,{onAdd:u,addAuth:"syspermissions:create",showDelete:!1}),t(J,{bordered:"",resizable:!0,loading:s.loading,columns:x,"row-key":_=>_._id,pagination:s.query.pagination,onChange:F,"row-class-name":(_,o)=>o%2===1?"table-striped":null,"data-source":s.dataList},{bodyCell:a(({column:_,record:o})=>[_.key==="status"?(f(),O(H,{key:0,checked:o.status,"onUpdate:checked":C=>o.status=C,disabled:!ee(ae)("sys:permissions:stop"),"checked-children":"正常","un-checked-children":"停用",onChange:C=>U(o)},null,8,["checked","onUpdate:checked","disabled","onChange"])):v("",!0),_.key==="auth"?(f(),D(L,{key:1},[o.auth?(f(),O($,{key:0,color:"#87d068"},{default:a(()=>[i("是")]),_:1})):v("",!0)],64)):v("",!0),_.key==="key"?N((f(),O($,{key:2,color:"green"},{default:a(()=>[i(h(o.key),1)]),_:2},1024)),[[R,o.key]]):v("",!0),_.key==="parent_key"?(f(),D(L,{key:3},[o.parent_key?N((f(),O($,{key:0,color:"green"},{default:a(()=>[i(h(o.parent_key),1)]),_:2},1024)),[[R,o.key]]):v("",!0)],64)):_.key==="action"?(f(),O(X,{key:4,viewAuth:"sys:permissions:list",editAuth:"sys:permissions:update",deleteAuth:"sys:permissions:delete",onView:C=>A(o),showEdit:o.status,onEdit:C=>u(o),onDelete:C=>k(o)},null,8,["onView","showEdit","onEdit","onDelete"])):v("",!0)]),_:1},8,["loading","row-key","pagination","row-class-name","data-source"]),(f(),O(M,{minWidth:650,show:s.show.edit,title:s.editTitle,key:s.editTitle,onClose:b},{default:a(()=>[t(ue,{updateData:s.updateData,onClose:b},null,8,["updateData"])]),_:1},8,["show","title"])),t(M,{minWidth:650,show:s.show.view,title:"查看权限",key:"ViewPermissionsInfo",onClose:b},{default:a(()=>[t(ne,{viewData:s.viewData,onClose:b},null,8,["viewData"])]),_:1},8,["show"])])}}};export{be as default};
