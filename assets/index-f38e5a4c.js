import{w as k,d as M,U as P,e as V,n as E,h as I,V as L,W as O,X as z,Y as x,z as R,E as F,o as N,c as K,i as T,A as H}from"./index-be6ac54a.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";var G=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Y=function(e){return G.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},W=function(e,t,n){Object.keys(t).filter(Y).forEach(function(o){var a=t[o];typeof a=="function"&&(o==="onInit"?a(e,n):n.on(o.substring(2),function(r){return a(r,n)}))})},X=function(e,t,n,o){var a=e.modelEvents?e.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;k(o,function(u,l){n&&typeof u=="string"&&u!==l&&u!==n.getContent({format:e.outputFormat})&&n.setContent(u)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},J=function(e,t,n,o,a,r){o.setContent(r()),n.attrs["onUpdate:modelValue"]&&X(t,n,o,a),W(e,n.attrs,o)},w=0,U=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return w++,e+"_"+n+w+String(t)},Q=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},A=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},Z=function(e,t){return A(e).concat(A(t))},$=function(e){return e==null},D=function(){return{listeners:[],scriptId:U("tiny-script"),scriptLoaded:!1}},ee=function(){var e=D(),t=function(a,r,u,l){var i=r.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=a,i.src=u;var d=function(){i.removeEventListener("load",d),l()};i.addEventListener("load",d),r.head&&r.head.appendChild(i)},n=function(a,r,u){e.scriptLoaded?u():(e.listeners.push(u),a.getElementById(e.scriptId)||t(e.scriptId,a,r,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},o=function(){e=D()};return{load:n,reinitialize:o}},ne=ee(),te=function(){return typeof window<"u"?window:global},b=function(){var e=te();return e&&e.tinymce?e.tinymce:null},ie={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},v=globalThis&&globalThis.__assign||function(){return v=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},v.apply(this,arguments)},ae=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},oe=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},C={selector:void 0,target:void 0},re=M({props:ie,setup:function(e,t){var n=e.init?v(v({},e.init),C):v({},C),o=P(e),a=o.disabled,r=o.modelValue,u=o.tagName,l=V(null),i=null,d=e.id||U("tiny-vue"),f=e.init&&e.init.inline||e.inline,g=!!t.attrs["onUpdate:modelValue"],p=!0,_=e.initialValue?e.initialValue:"",y="",S=function(s){return g?function(){return r!=null&&r.value?r.value:""}:function(){return s?_:y}},m=function(){var s=S(p),c=v(v({},n),{readonly:e.disabled,target:l.value,plugins:Z(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:f,setup:function(h){i=h,h.on("init",function(B){return J(B,e,t,h,r,s)}),typeof n.setup=="function"&&n.setup(h)}});Q(l.value)&&(l.value.style.visibility=""),b().init(c),p=!1};k(a,function(s){var c;i!==null&&(typeof((c=i.mode)===null||c===void 0?void 0:c.set)=="function"?i.mode.set(s?"readonly":"design"):i.setMode(s?"readonly":"design"))}),k(u,function(s){var c;g||(y=i.getContent()),(c=b())===null||c===void 0||c.remove(i),E(function(){return m()})}),I(function(){if(b()!==null)m();else if(l.value&&l.value.ownerDocument){var s=e.cloudChannel?e.cloudChannel:"6",c=e.apiKey?e.apiKey:"no-api-key",h=$(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(s,"/tinymce.min.js"):e.tinymceScriptSrc;ne.load(l.value.ownerDocument,h,m)}}),L(function(){b()!==null&&b().remove(i)}),f||(O(function(){p||m()}),z(function(){var s;g||(y=i.getContent()),(s=b())===null||s===void 0||s.remove(i)}));var j=function(s){var c;y=i.getContent(),(c=b())===null||c===void 0||c.remove(i),n=v(v(v({},n),s),C),E(function(){return m()})};return t.expose({rerender:j,getEditor:function(){return i}}),function(){return f?ae(x,d,l,e.tagName):oe(x,d,l)}}});const le=["template fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | blockquote subscript superscript removeformat ","styleselect formatselect fontselect fontsizeselect | table image axupimgs media emoticons charmap hr pagebreak insertdatetime  selectall visualblocks searchreplace | code print preview | indent2em lineheight formatpainter"],ue="template preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount autosave emoticons";const se={class:"tinymce-boxz"},ce={__name:"index",props:{value:{type:String,default:""},height:{type:Number,default(){return 500}},placeholder:{type:String,default(){return"请输入内容"}},skin:{type:String,default(){return"oxide"}}},emits:["update:value"],setup(e,{emit:t}){const n=e,o=t,a=V(n.value),r=R({apiKey:"74eea86445c36b7310f12bd0b11bb0328807bdf842468974b0f48a2c20804798",init:{skin:n.skin,language:"zh_CN",placeholder:n.placeholder,min_width:320,min_height:220,height:n.height,resize:"both",branding:!1,statusbar:!1,font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",plugins:ue,toolbar:le,templates:[{title:"模板1",description:"模板描述",content:"## 菜单栏配置，设为false则隐藏，不配置则默认显示全部菜单，也可自定义配置"}],paste_data_images:!0,images_upload_handler:(u,l,i)=>{let d=new FileReader;d.readAsDataURL(u.blob()),d.onloadend=function(){const f=d.result;l(f)}},file_picker_types:"file image media",file_picker_callback:function(u,l,i){let d;i.filetype=="image"?d=".jpg, .jpeg, .png, .gif, .ico, .svg":i.filetype=="media"?d=".mp3, .mp4, .avi, .mov":d=".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4, .jpg, .jpeg, .png, .gif, .ico, .svg";let f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept",d),f.click(),f.onchange=()=>{let g=f.files[0],p=new FileReader;p.readAsDataURL(g),p.onload=function(){let _="blobid"+new Date().getTime(),y=tinymce.activeEditor.editorUpload.blobCache,S=p.result.split(",")[1],m=y.create(_,g,S);y.add(m),u(m.blobUri(),{title:g.name})}}}}});return F(()=>{o("update:value",a.value)}),(u,l)=>(N(),K("div",se,[T(H(re),{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=i=>a.value=i),"api-key":r.apiKey,init:r.init},null,8,["modelValue","api-key","init"])]))}},ve=q(ce,[["__scopeId","data-v-e8de77ff"]]);export{ve as default};
