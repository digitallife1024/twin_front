import{Z as J}from"./ZySearchForm-e4416514.js";import{_ as P,Z as V,a as M,b as R,T as F,c as Q,d as X}from"./util.time-f709c52a.js";import{z as C,e as D,w as L,k as o,o as A,c as O,i as e,l as s,v as w,t as q,C as S,F as B,G as z,D as U,H as Y,I as ee,A as te,b as ae,m as se,J as re}from"./index-6d2e3bad.js";import{i as $,h as de}from"./util.common-7559d8cb.js";import{a as E}from"./server-ae9811eb.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";const le=y=>E.post("/v1/sys/roles/create",y),ue=y=>E.post("/v1/sys/roles/update",y),ne=y=>E.post("/v1/sys/roles/delete",y);const ce={class:"zy-tree"},ie={key:0},pe={__name:"ZyPermTree",props:{value:{type:Array,default:()=>[]}},emits:["update:value"],setup(y,{emit:g}){const t=y,i=g,r=C({treeData:[],keysArray:[]}),p=D(),_=D(),c=D(),h={children:"children",title:"name",key:"key"};function v(u){u.forEach(a=>{r.keysArray.push(a.key),a.children&&v(a.children)})}L(c,u=>{i("update:value",u)});function n(){r.treeData=[{_id:"64a6767b2f517ae48b51de4a",name:"首页",key:"index",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:27.735Z",updatedAt:"2023-07-18T03:16:59.334Z",disabled:!1},{_id:"64a676872f517ae48b51de50",name:"系统管理",key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:39.650Z",updatedAt:"2023-07-06T13:26:57.493Z",disabled:!1,children:[{_id:"64a676942f517ae48b51de56",name:"用户管理",key:"sys:users",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T08:08:52.375Z",updatedAt:"2023-07-07T02:37:51.339Z",disabled:!1,children:[{_id:"64a676a62f517ae48b51de5c",name:"查询",key:"sys:users:list",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:10.271Z",updatedAt:"2023-08-22T01:28:57.225Z",disabled:!1},{_id:"64a676b72f517ae48b51de62",name:"增加",key:"sys:users:create",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:27.173Z",updatedAt:"2023-07-06T14:41:34.107Z",disabled:!1},{_id:"64a676ca2f517ae48b51de68",name:"删除",key:"sys:users:delete",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:09:46.180Z",updatedAt:"2023-07-06T14:41:40.693Z",disabled:!1},{_id:"64a676d82f517ae48b51de6e",name:"重置密码",key:"sys:users:reset",parent_key:"sys:users",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T08:10:00.965Z",updatedAt:"2023-07-06T14:41:54.406Z",disabled:!1}]},{_id:"64a6f171d2fac9dd58d3025c",name:"角色管理",key:"sys:roles",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1,children:[{_id:"64a6f171d2fac9dd58d3025d",name:"查询",key:"sys:roles:list",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d3025e",name:"增加",key:"sys:roles:create",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d3025f",name:"删除",key:"sys:roles:delete",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1},{_id:"64a6f171d2fac9dd58d30260",name:"更新",key:"sys:roles:update",parent_key:"sys:roles",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:53:05.026Z",updatedAt:"2023-07-06T16:53:05.026Z",disabled:!1}]},{_id:"64a7799604246540f7286663",name:"权限管理",key:"sys:permissions",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T02:33:58.142Z",updatedAt:"2023-07-07T02:33:58.142Z",disabled:!1,children:[{_id:"64a6eca8bbab6245325057ee",name:"查询",key:"sys:permissions:list",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:32:40.326Z",updatedAt:"2023-07-06T16:32:40.326Z",disabled:!1},{_id:"64a6ecc0bbab6245325057f4",name:"增加",key:"sys:permissions:create",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:33:04.782Z",updatedAt:"2023-07-06T16:33:04.782Z",disabled:!1},{_id:"64a6ecdebbab6245325057fa",name:"删除",key:"sys:permissions:delete",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:33:34.613Z",updatedAt:"2023-07-06T16:33:34.613Z",disabled:!1},{_id:"64a6ecffbbab624532505800",name:"修改",key:"sys:permissions:update",parent_key:"sys:permissions",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-06T16:34:07.219Z",updatedAt:"2023-07-06T16:34:07.219Z",disabled:!1},{_id:"64a77a0104246540f7286681",name:"停用",key:"sys:permissions:stop",parent_key:"sys:permissions",auth:!0,sortOrder:null,status:!0,createdAt:"2023-07-07T02:35:45.300Z",updatedAt:"2023-07-07T02:35:45.300Z",disabled:!1}]},{_id:"64a7cbe6b85fe16110610cf5",name:"操作日志",key:"sys:users_opt_logs",parent_key:"sys",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1,children:[{_id:"64a7cbe6b85fe16110610cf6",name:"查询",key:"sys:users_opt_logs:list",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf7",name:"增加",key:"sys:users_opt_logs:create",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf8",name:"删除",key:"sys:users_opt_logs:delete",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7cbe6b85fe16110610cf9",name:"更新",key:"sys:users_opt_logs:update",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:25:10.645Z",updatedAt:"2023-07-07T08:25:10.645Z",disabled:!1},{_id:"64a7d30aacc04191a405fb61",name:"批量删除",key:"sys:users_opt_logs:deleteAll",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T08:55:38.696Z",updatedAt:"2023-07-09T13:57:08.966Z",disabled:!1},{_id:"64aabc5804fd30a2ac31c2a9",name:"导出",key:"sys:users_opt_logs:export",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-09T13:55:36.412Z",updatedAt:"2023-07-09T13:55:36.412Z"},{_id:"64aabc6b04fd30a2ac31c2b5",name:"导入",key:"sys:users_opt_logs:import",parent_key:"sys:users_opt_logs",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-09T13:55:55.856Z",updatedAt:"2023-07-09T13:55:55.856Z"}]},{_id:"64b4c7dad6ac9bf24cecc6d1",name:"资源管理",key:"sys:resources",parent_key:"sys",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.912Z",updatedAt:"2023-07-17T04:47:22.912Z",children:[{_id:"64b4c7dad6ac9bf24cecc6d2",name:"查询",key:"sys:resources:list",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d3",name:"增加",key:"sys:resources:create",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d4",name:"删除",key:"sys:resources:delete",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"},{_id:"64b4c7dad6ac9bf24cecc6d5",name:"更新",key:"sys:resources:update",parent_key:"sys:resources",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-07-17T04:47:22.913Z",updatedAt:"2023-07-17T04:47:22.913Z"}]},{_id:"64d4a6d9f8b9690fab537f02",name:"访客记录",key:"sys:visitors",parent_key:"sys",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-10T08:59:05.870Z",updatedAt:"2023-08-10T08:59:05.870Z",children:[{_id:"64d4a6d9f8b9690fab537f03",name:"查询",key:"sys:visitors:list",parent_key:"sys:visitors",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-10T08:59:05.870Z",updatedAt:"2023-08-10T08:59:05.870Z"},{_id:"64d4a6d9f8b9690fab537f04",name:"增加",key:"sys:visitors:create",parent_key:"sys:visitors",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-10T08:59:05.871Z",updatedAt:"2023-08-10T08:59:05.871Z"},{_id:"64d4a6d9f8b9690fab537f05",name:"删除",key:"sys:visitors:delete",parent_key:"sys:visitors",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-10T08:59:05.871Z",updatedAt:"2023-08-10T08:59:05.871Z"},{_id:"64d4a6d9f8b9690fab537f06",name:"更新",key:"sys:visitors:update",parent_key:"sys:visitors",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-10T08:59:05.871Z",updatedAt:"2023-08-10T08:59:05.871Z"}]},{_id:"6509b7827efd16fb4d8e384e",name:"数据字典",key:"sys:dictionaries",parent_key:"sys",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:00:18.192Z",updatedAt:"2023-09-19T15:00:18.192Z",children:[{_id:"6509b7827efd16fb4d8e384f",name:"查询",key:"sys:dictionaries:list",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:00:18.192Z",updatedAt:"2023-09-19T15:00:18.192Z"},{_id:"6509b7827efd16fb4d8e3850",name:"增加",key:"sys:dictionaries:create",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:00:18.192Z",updatedAt:"2023-09-19T15:00:18.192Z"},{_id:"6509b7827efd16fb4d8e3851",name:"删除",key:"sys:dictionaries:delete",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:00:18.192Z",updatedAt:"2023-09-19T15:00:18.192Z"},{_id:"6509b7827efd16fb4d8e3852",name:"更新",key:"sys:dictionaries:update",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:00:18.192Z",updatedAt:"2023-09-19T15:00:18.192Z"},{_id:"6509b7bf7efd16fb4d8e385d",name:"字典类型查询",key:"sys:dictionariesvalues:list",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:01:19.834Z",updatedAt:"2023-09-19T15:01:19.834Z"},{_id:"6509b7bf7efd16fb4d8e385e",name:"字典类型增加",key:"sys:dictionariesvalues:create",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:01:19.834Z",updatedAt:"2023-09-19T15:01:19.834Z"},{_id:"6509b7bf7efd16fb4d8e385f",name:"字典类型删除",key:"sys:dictionariesvalues:delete",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:01:19.834Z",updatedAt:"2023-09-19T15:01:19.834Z"},{_id:"6509b7bf7efd16fb4d8e3860",name:"字典类型更新",key:"sys:dictionariesvalues:update",parent_key:"sys:dictionaries",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:01:19.834Z",updatedAt:"2023-09-19T15:01:19.834Z"}]}]},{_id:"64a6bce2210858fb6ec32f55",name:"开发工具",key:"dev",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-06T13:08:50.188Z",updatedAt:"2023-07-06T13:27:34.278Z",disabled:!1,children:[{_id:"64a6ec18bbab6245325057dc",name:"图标列表",key:"dev:icon",parent_key:"dev",auth:!1,sortOrder:1,status:!0,createdAt:"2023-07-06T16:30:16.901Z",updatedAt:"2023-07-07T03:22:12.747Z",disabled:!1},{_id:"64a784d104a94eaa96595abb",name:"代码生成",key:"dev:codes",parent_key:"dev",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T03:21:53.616Z",disabled:!1,children:[{_id:"64a784d104a94eaa96595abc",name:"查询",key:"dev:codes:list",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T03:21:53.616Z",disabled:!1},{_id:"64a784d104a94eaa96595abd",name:"创建",key:"dev:codes:singleCurdFrontAndBack",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.616Z",updatedAt:"2023-07-07T05:28:34.029Z",disabled:!1},{_id:"64a784d104a94eaa96595abe",name:"删除",key:"dev:codes:delete",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.617Z",updatedAt:"2023-07-07T03:21:53.617Z",disabled:!1},{_id:"64a784d104a94eaa96595abf",name:"批量删除",key:"dev:codes:deleteAll",parent_key:"dev:codes",auth:!0,sortOrder:0,status:!0,createdAt:"2023-07-07T03:21:53.617Z",updatedAt:"2023-07-07T05:28:50.417Z",disabled:!1}]}]},{_id:"64a7a633f97cdac3cb1bbbcf",name:"页面示例",key:"pages",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:44:19.405Z",updatedAt:"2023-07-07T05:44:19.405Z",disabled:!1,children:[{_id:"64a7a9dda971facd04696235",name:"综合页面",key:"pages:all",parent_key:"pages",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:59:57.159Z",updatedAt:"2023-07-07T05:59:57.159Z",disabled:!1}]},{_id:"64a7a67af97cdac3cb1bbbee",name:"组件示例",key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:30.168Z",updatedAt:"2023-07-07T05:45:30.168Z",disabled:!1,children:[{_id:"64a7a695f97cdac3cb1bbbf4",name:"图表地图",key:"components:echart",parent_key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:45:57.351Z",disabled:!1,children:[{_id:"64a7a695f97cdac3cb1bbbf5",name:"贵州地图",key:"components:echart:guizhouMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:19.623Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf6",name:"中国地图",key:"components:echart:chinaMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:33.902Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf7",name:"世界地图",key:"components:echart:worldMap",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.351Z",updatedAt:"2023-07-07T05:46:44.697Z",disabled:!1},{_id:"64a7a695f97cdac3cb1bbbf8",name:"折线图",key:"components:echart:line",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:45:57.352Z",updatedAt:"2023-07-07T05:46:56.584Z",disabled:!1},{_id:"64a7a6e1f97cdac3cb1bbc16",name:"饼图",key:"components:echart:pie",parent_key:"components:echart",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T05:47:13.846Z",updatedAt:"2023-07-07T05:47:20.216Z",disabled:!1}]},{_id:"64a7ab9da971facd04696299",name:"富文本",key:"components:editor",parent_key:"components",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:07:25.737Z",updatedAt:"2023-07-07T06:07:25.737Z",disabled:!1,children:[{_id:"64a7abb7a971facd0469629f",name:"Tinymce",key:"components:editor:Tinymce",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:07:51.383Z",updatedAt:"2023-07-07T06:08:04.393Z",disabled:!1},{_id:"64a7abe1a971facd046962ab",name:"Vditor",key:"components:editor:Vditor",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:08:33.975Z",updatedAt:"2023-07-07T06:08:33.975Z",disabled:!1},{_id:"64a7abefa971facd046962b1",name:"VMdEditor",key:"components:editor:VMdEditor",parent_key:"components:editor",auth:!1,sortOrder:0,status:!0,createdAt:"2023-07-07T06:08:47.735Z",updatedAt:"2023-07-07T06:08:47.735Z",disabled:!1}]}]},{_id:"64cfada9c3794728bc32ac40",name:"博客管理",key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:26:49.389Z",updatedAt:"2023-08-06T14:26:49.389Z",children:[{_id:"64cfade2c3794728bc32ac4c",name:"博文管理",key:"blog:blog_articles",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.488Z",updatedAt:"2023-08-06T14:27:46.488Z",children:[{_id:"64cfade2c3794728bc32ac4d",name:"查询",key:"blog:blog_articles:list",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.488Z",updatedAt:"2023-08-06T14:27:46.488Z"},{_id:"64cfade2c3794728bc32ac4e",name:"增加",key:"blog:blog_articles:create",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"},{_id:"64cfade2c3794728bc32ac4f",name:"删除",key:"blog:blog_articles:delete",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"},{_id:"64cfade2c3794728bc32ac50",name:"更新",key:"blog:blog_articles:update",parent_key:"blog:blog_articles",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:27:46.489Z",updatedAt:"2023-08-06T14:27:46.489Z"}]},{_id:"64cfae09c3794728bc32ac5c",name:"作品管理",key:"blog:portfolios",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z",children:[{_id:"64cfae09c3794728bc32ac5d",name:"查询",key:"blog:portfolios:list",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac5e",name:"增加",key:"blog:portfolios:create",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac5f",name:"删除",key:"blog:portfolios:delete",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.623Z",updatedAt:"2023-08-06T14:28:25.623Z"},{_id:"64cfae09c3794728bc32ac60",name:"更新",key:"blog:portfolios:update",parent_key:"blog:portfolios",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-06T14:28:25.624Z",updatedAt:"2023-08-06T14:28:25.624Z"}]},{_id:"64d1d19153d1c684a73c8412",name:"留言管理",key:"blog:messages",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.901Z",updatedAt:"2023-08-08T05:24:33.901Z",children:[{_id:"64d1d19153d1c684a73c8413",name:"查询",key:"blog:messages:list",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.901Z",updatedAt:"2023-08-08T05:24:33.901Z"},{_id:"64d1d19153d1c684a73c8414",name:"增加",key:"blog:messages:create",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"},{_id:"64d1d19153d1c684a73c8415",name:"删除",key:"blog:messages:delete",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"},{_id:"64d1d19153d1c684a73c8416",name:"更新",key:"blog:messages:update",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-08T05:24:33.902Z",updatedAt:"2023-08-08T05:24:33.902Z"},{_id:"64eef85fa0d58a3cda8ce53f",name:"回复",key:"blog:messages:reply",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-08-30T08:05:51.963Z",updatedAt:"2023-08-30T08:06:33.791Z"},{_id:"6509b94d7efd16fb4d8e38b7",name:"清除所有留言",key:"blog:messages:deleteAll",parent_key:"blog:messages",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:07:57.376Z",updatedAt:"2023-09-19T15:07:57.376Z"}]},{_id:"6509b8667efd16fb4d8e386e",name:"前台管理",key:"blog:frontendsetups",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:06.719Z",updatedAt:"2023-09-19T15:04:06.719Z",children:[{_id:"6509b8667efd16fb4d8e386f",name:"查询",key:"blog:frontendsetups:list",parent_key:"blog:frontendsetups",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:06.720Z",updatedAt:"2023-09-19T15:04:06.720Z"},{_id:"6509b8667efd16fb4d8e3870",name:"增加",key:"blog:frontendsetups:create",parent_key:"blog:frontendsetups",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:06.720Z",updatedAt:"2023-09-19T15:04:06.720Z"},{_id:"6509b8667efd16fb4d8e3871",name:"删除",key:"blog:frontendsetups:delete",parent_key:"blog:frontendsetups",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:06.720Z",updatedAt:"2023-09-19T15:04:06.720Z"},{_id:"6509b8667efd16fb4d8e3872",name:"更新",key:"blog:frontendsetups:update",parent_key:"blog:frontendsetups",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:06.720Z",updatedAt:"2023-09-19T15:04:06.720Z"}]},{_id:"6509b8967efd16fb4d8e387c",name:"博文评论",key:"blog:comments",parent_key:"blog",auth:!1,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:54.559Z",updatedAt:"2023-09-19T15:04:54.559Z",children:[{_id:"6509b8967efd16fb4d8e387d",name:"查询",key:"blog:comments:list",parent_key:"blog:comments",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:54.559Z",updatedAt:"2023-09-19T15:04:54.559Z"},{_id:"6509b8967efd16fb4d8e387e",name:"增加",key:"blog:comments:create",parent_key:"blog:comments",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:54.559Z",updatedAt:"2023-09-19T15:04:54.559Z"},{_id:"6509b8967efd16fb4d8e387f",name:"删除",key:"blog:comments:delete",parent_key:"blog:comments",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:54.559Z",updatedAt:"2023-09-19T15:04:54.559Z"},{_id:"6509b8967efd16fb4d8e3880",name:"更新",key:"blog:comments:update",parent_key:"blog:comments",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:04:54.559Z",updatedAt:"2023-09-19T15:04:54.559Z"},{_id:"6509b9207efd16fb4d8e38a3",name:"清除所有评论",key:"blog:comments:deleteAll",parent_key:"blog:comments",auth:!0,sortOrder:0,status:!0,disabled:!1,createdAt:"2023-09-19T15:07:12.869Z",updatedAt:"2023-09-19T15:07:28.770Z"}]}]}],t.value.includes("*")?(v(r.treeData),p.value=r.keysArray,_.value=r.keysArray,c.value=r.keysArray):(p.value=t.value,_.value=t.value,c.value=t.value)}function l(u){p.value=u}function T(u){_.value=u}function m(u){c.value=u}return n(),(u,a)=>{const d=o("IconFont"),f=o("a-tag"),b=o("a-tree");return A(),O("section",ce,[e(b,{expandedKeys:p.value,selectedKeys:_.value,checkedKeys:c.value,checkable:"","tree-data":r.treeData,"field-names":h,"onUpdate:expandedKeys":l,"onUpdate:selectedKeys":T,"onUpdate:checkedKeys":m},{title:s(({auth:K,name:I,key:N})=>[K?(A(),O("span",ie,[w(q(I)+" ",1),(A(),S(f,{color:"orange",style:{"margin-left":"5px"},key:N},{icon:s(()=>[e(d,{type:"icon-quanxianguanli"})]),default:s(()=>[w(" "+q(N),1)]),_:2},1024))])):(A(),O(B,{key:1},[w(q(I),1)],64))]),_:1},8,["expandedKeys","selectedKeys","checkedKeys","tree-data"])])}}},fe=oe(pe,[["__scopeId","data-v-e4c1047f"]]),ye={class:"zy-get"},_e={__name:"get-roles-info",props:{updateData:{type:Object,default:()=>{}}},emits:["close"],setup(y,{emit:g}){const t={style:{width:"100px"}},i={span:14},r=C({form:{}}),p=D(),_=y,c=g;r.form=_.updateData||{};const h=async()=>{try{const n=await p.value.validateFields();n._id=r.form._id}catch(n){console.log("Failed:",n)}},v=()=>{z("还没保存数据，确认退出?").then(n=>{n&&c("close",!0)})};return(n,l)=>{const T=o("a-input"),m=o("a-form-item"),u=o("a-textarea"),a=o("a-radio"),d=o("a-radio-group"),f=o("a-form");return A(),O("section",ye,[e(f,{model:r.form,ref_key:"formRef",ref:p,class:"zy-form","label-col":t,"wrapper-col":i},{default:s(()=>[e(m,{label:"角色名称",name:"roleName",rules:[{required:!0,message:"请输入角色名称!"}]},{default:s(()=>[e(T,{value:r.form.roleName,"onUpdate:value":l[0]||(l[0]=b=>r.form.roleName=b),allowClear:"",placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),e(m,{label:"角色标识",name:"roleAuth",rules:[{required:!0,message:"请输入角色标识!"}]},{default:s(()=>[e(T,{value:r.form.roleAuth,"onUpdate:value":l[1]||(l[1]=b=>r.form.roleAuth=b),disabled:"",allowClear:"",placeholder:"请输入角色标识"},null,8,["value"])]),_:1}),e(m,{label:"角色备注",name:"remark"},{default:s(()=>[e(u,{value:r.form.remark,"onUpdate:value":l[2]||(l[2]=b=>r.form.remark=b),allowClear:"",placeholder:"请输入角色备注"},null,8,["value"])]),_:1}),e(m,{label:"状态",name:"status",rules:[{required:!0,message:"请选状态!"}]},{default:s(()=>[e(d,{value:r.form.status,"onUpdate:value":l[3]||(l[3]=b=>r.form.status=b)},{default:s(()=>[e(a,{value:!0},{default:s(()=>[w("正常")]),_:1}),e(a,{value:!1},{default:s(()=>[w("禁用")]),_:1})]),_:1},8,["value"])]),_:1}),e(m,{label:"菜单权限",name:"perms",rules:[{required:!0,message:"请选权限!"}]},{default:s(()=>[e(fe,{value:r.form.perms,"onUpdate:value":l[4]||(l[4]=b=>r.form.perms=b)},null,8,["value"])]),_:1})]),_:1},8,["model"]),e(P,{onSave:h,onClose:v})])}}},me={class:"zy-get"},be={__name:"add-roles-info",props:{},emits:["close"],setup(y,{emit:g}){const t=D(["sys:users"]);L(t,n=>{console.log("Parent component - perms:",n)});const i={style:{width:"100px"}},r={span:14},p=g,_=D(),c=C({form:{}}),h=async()=>{try{const n=await _.value.validateFields();le(n).then(l=>{U.success("添加角色成功！"),p("close",!0)})}catch(n){console.log("Failed:",n)}},v=()=>{z("还没保存数据，确认退出?").then(n=>{n&&p("close")})};return(n,l)=>{const T=o("a-input"),m=o("a-form-item"),u=o("a-textarea"),a=o("a-form");return A(),O("section",me,[e(a,{model:c.form,style:{"background-color":"#fff"},ref_key:"formRef",ref:_,"label-col":i,"wrapper-col":r},{default:s(()=>[e(m,{label:"角色名称",name:"roleName",rules:[{required:!0,message:"请输入角色名称!"}]},{default:s(()=>[e(T,{value:c.form.roleName,"onUpdate:value":l[0]||(l[0]=d=>c.form.roleName=d),allowClear:"",placeholder:"请输入角色名称"},null,8,["value"])]),_:1}),e(m,{label:"角色标识",name:"roleAuth",rules:[{required:!0,message:"请输入角色标识!"}]},{default:s(()=>[e(T,{value:c.form.roleAuth,"onUpdate:value":l[1]||(l[1]=d=>c.form.roleAuth=d),allowClear:"",placeholder:"请输入角色标识"},null,8,["value"])]),_:1}),e(m,{label:"角色备注",name:"remark"},{default:s(()=>[e(u,{value:c.form.remark,"onUpdate:value":l[2]||(l[2]=d=>c.form.remark=d),allowClear:"",placeholder:"请输入角色备注"},null,8,["value"])]),_:1})]),_:1},8,["model"]),e(P,{onSave:h,onClose:v})])}}},ke={class:"zy-view"},Ae={__name:"view-roles-info",props:{viewData:{type:Object,default:()=>{}}},emits:["close"],setup(y,{emit:g}){return console.log(y.viewData),(i,r)=>{const p=o("a-tag"),_=o("a-textarea");return A(),O("section",ke,[e(M,null,{default:s(()=>[e(V,{label:"角色名称"},{default:s(()=>[e(p,{color:"#f50"},{default:s(()=>[w("超级管理员")]),_:1})]),_:1}),e(V,{label:"角色标识"},{default:s(()=>[w(" super admin ")]),_:1})]),_:1}),e(M,null,{default:s(()=>[e(V,{label:"备注"},{default:s(()=>[e(_,{style:{width:"500px"},disabled:"",placeholder:"Autosize height based on content lines","auto-size":""})]),_:1})]),_:1})])}}},we={__name:"dir-roles-info",setup(y){const g=[{title:"角色名称",dataIndex:"roleName",key:"roleName",align:"center"},{title:"角色标识",dataIndex:"roleAuth",key:"roleAuth",align:""},{title:"备注",dataIndex:"remark",key:"remark",align:""},{title:"状态",dataIndex:"status",key:"status",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",width:225,key:"action",align:"center",fixed:"right"}],t=C({show:{add:!1,edit:!1,view:!1},activeComponent:null,updateData:{},viewData:{},dataList:[],query:{params:{},pagination:{current:1,pageSize:10,total:0,hideOnSinglePage:!0},sort:{columnKey:"createdAt",order:"ascend"}},loading:{spinning:!1,tip:"加载中"}}),i=(a=1)=>{t.query.pagination.current=a,h()},r=()=>{i()},p=({current:a,pageSize:d})=>{t.query.pagination=C({current:a,pageSize:d}),h()},_=({columnKey:a,order:d})=>{t.query.sort=C({current,order:d}),h()},c=a=>{ue({_id:a._id,status:a.status}).then(d=>{U.success(a.status?"启用成功":"停用成功"),i()})},h=()=>{t.loading.spinning=!0,ee(t.query);let a={status:1,message:"Success.",data:{result:[{_id:"64a423816f4197cfc70375e3",roleName:"超级管理员",roleAuth:"SUPER-ADMIN",perms:["*"],remark:"拥有所有权限",status:!0,createdAt:"2023-07-04T13:49:53.993Z",updatedAt:"2023-07-04T13:50:42.566Z"},{_id:"64a426a56f4197cfc70375f6",roleName:"普通管理员",roleAuth:"NORMALL-ADMIN",perms:["index","sys:users:list","sys:roles:list","sys:permissions:list"],remark:"拥有部分权限",status:!0,createdAt:"2023-07-04T14:03:17.858Z",updatedAt:"2023-07-06T16:53:42.888Z"},{_id:"64a6e9c04ef9906878daeced",roleName:"开发人员",roleAuth:"DEV-ADMIN",perms:["index","dev","dev:codes","dev:codes:delete","dev:icon","dev:codes:list","dev:codes:singleCurdFrontAndBack","dev:codes:deleteAll","sys:resources","sys:resources:list","sys:resources:create","sys:resources:delete","sys:resources:update"],remark:"开发人员",status:!0,createdAt:"2023-07-06T16:20:16.785Z",updatedAt:"2023-07-17T04:48:00.257Z"},{_id:"64a7aa20a971facd04696242",roleName:"访客",roleAuth:"VISITOR-ADMIN",perms:["index","components:echart:chinaMap","components:echart:worldMap","components:echart:line","components:echart:pie","pages","pages:all","dev:icon","dev:codes:list","components:editor","components:editor:Tinymce","components:editor:Vditor","components:editor:VMdEditor","components","components:echart","components:echart:guizhouMap","sys:permissions:list","blog:blog_articles:list","blog:portfolios:list","blog:messages:list","blog:messages:delete"],remark:"一般访客，更多的是有查看权限",status:!0,createdAt:"2023-07-07T06:01:04.121Z",updatedAt:"2023-08-08T05:25:44.071Z"}],current:1,pageSize:10,total:4},time:1694589275807};t.loading.spinning=!1;let d=a.data.result;for(const f of d)f.createdAt=F.formatTime(f.createdAt),f.updatedAt=F.formatTime(f.updatedAt);t.dataList=d,t.query.pagination.total=a.data.total,t.query.pagination.current=a.data.current,t.query.pagination.pageSize=a.data.pageSize},v=(a,d,f)=>{$(a)||p(a),$(f)||_(f)},n=a=>{t.show.view=!0,t.viewData=a},l=()=>{t.show.add=!0},T=a=>{t.show.edit=!0,t.updateData=a},m=a=>{z("确认删除该条数据?").then(d=>{d&&ne(a).then(f=>{U.success("删除成功"),i()})})},u=a=>{t.show.add=!1,t.show.view=!1,t.show.edit=!1,a&&i()};return i(),(a,d)=>{const f=o("a-input"),b=o("a-form-item"),K=o("a-switch"),I=o("IconFont"),N=o("a-tag"),G=o("a-descriptions-item"),j=o("a-descriptions"),W=o("a-table"),H=Y("copy");return A(),O("section",null,[e(J,{formValue:t.query.params,onSubmit:i,onReset:r},{default:s(()=>[e(b,{name:"name"},{default:s(()=>[e(f,{value:t.query.params.name,"onUpdate:value":d[0]||(d[0]=Z=>t.query.params.name=Z),allowClear:"",placeholder:"请输入名称",onPressEnter:i,autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},8,["formValue"]),e(Q,{onAdd:l,addAuth:"sys:roles:create",showDelete:!1}),e(W,{bordered:"",resizable:!0,loading:t.loading,columns:g,"row-key":Z=>Z._id,pagination:t.query.pagination,onChange:v,"row-class-name":(Z,k)=>k%2===1?"table-striped":null,"data-source":t.dataList},{bodyCell:s(({column:Z,record:k})=>[Z.key==="status"?(A(),S(K,{key:0,checked:k.status,"onUpdate:checked":x=>k.status=x,disabled:!te(de)("sys:role:update"),"checked-children":"正常","un-checked-children":"停用",onChange:x=>c(k)},null,8,["checked","onUpdate:checked","disabled","onChange"])):Z.key==="action"?(A(),S(X,{key:1,showView:!1,viewAuth:"sys:roles:list",editAuth:"sys:roles:update",deleteAuth:"sys:roles:delete",editText:"编辑 / 权限",showEdit:k.status,onView:x=>n(k),onEdit:x=>T(k),onDelete:x=>m(k)},null,8,["showEdit","onView","onEdit","onDelete"])):ae("",!0)]),expandedRowRender:s(({record:Z})=>[e(j,{title:"权限信息",bordered:"",layout:"vertical"},{default:s(()=>[e(G,{label:"角色权限",span:3},{default:s(()=>[(A(!0),O(B,null,se(Z.perms,(k,x)=>re((A(),S(N,{color:"#55acee",style:{margin:"5px",cursor:"pointer"},key:x},{icon:s(()=>[e(I,{type:"icon-quanxianguanli"})]),default:s(()=>[w(" "+q(k),1)]),_:2},1024)),[[H,k]])),128))]),_:2},1024)]),_:2},1024)]),_:1},8,["loading","row-key","pagination","row-class-name","data-source"]),e(R,{minWidth:650,show:t.show.add,title:"新增角色",key:"GetRolesInfo",onClose:u},{default:s(()=>[e(be,{onClose:u})]),_:1},8,["show"]),e(R,{minWidth:650,show:t.show.edit,title:"编辑角色",key:"GetRolesInfo",onClose:u},{default:s(()=>[e(_e,{updateData:t.updateData,onClose:u},null,8,["updateData"])]),_:1},8,["show"]),e(R,{minWidth:650,show:t.show.view,title:"查看角色",key:"GetRolesInfo",onClose:u},{default:s(()=>[e(Ae,{viewData:t.viewData,onClose:u},null,8,["viewData"])]),_:1},8,["show"])])}}};export{we as default};
