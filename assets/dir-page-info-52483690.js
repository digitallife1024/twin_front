import{_ as G,Z as h,a as q,c as P,b as j,T as C,d as K}from"./util.time-f709c52a.js";import{z as D,e as R,k as r,o as b,c as k,i as t,l as i,a as B,D as F,G as $,v as _,t as Z,I as M,C as U,b as O}from"./index-6d2e3bad.js";import"./server-ae9811eb.js";import W from"./index-8fc88ed2.js";import{Z as H}from"./ZySearchForm-e4416514.js";import{i as E}from"./util.common-7559d8cb.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"zy-get"},Q={style:{width:"500px"}},X={__name:"get-page-info",props:{updateData:{type:Object,default:()=>{}}},emits:["close"],setup(c,{emit:w}){const e={style:{width:"70px"}},A={span:14},l=D({form:{}}),g=c,f=w,v=R();R(!g.updateData).value||(l.form=g.updateData||{});const I=async()=>{try{const m=await v.value.validateFields();F.success("操作成功"),f("close",!0)}catch(m){console.log("Failed:",m)}},x=()=>{$("还没保存数据，确认退出?").then(m=>{m&&f("close")})};return(m,n)=>{const d=r("a-input"),a=r("a-form-item"),s=r("a-textarea"),o=r("a-form");return b(),k("section",J,[t(o,{model:l.form,class:"zy-form","label-col":e,ref_key:"formRef",ref:v,"wrapper-col":A},{default:i(()=>[t(a,{label:"封面",name:"coverImage",rules:[{required:!0,message:"请输入封面!"}]},{default:i(()=>[t(d,{value:l.form.coverImage,"onUpdate:value":n[0]||(n[0]=u=>l.form.coverImage=u),allowClear:"",placeholder:"请输入封面"},null,8,["value"])]),_:1}),t(a,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题!"}]},{default:i(()=>[t(d,{value:l.form.title,"onUpdate:value":n[1]||(n[1]=u=>l.form.title=u),allowClear:"",placeholder:"请输入标题"},null,8,["value"])]),_:1}),t(a,{label:"分类",name:"category",rules:[{required:!0,message:"请输入分类!"}]},{default:i(()=>[t(d,{value:l.form.category,"onUpdate:value":n[2]||(n[2]=u=>l.form.category=u),allowClear:"",placeholder:"请输入分类"},null,8,["value"])]),_:1}),t(a,{label:"摘要",name:"summary"},{default:i(()=>[t(s,{value:l.form.summary,"onUpdate:value":n[3]||(n[3]=u=>l.form.summary=u),allowClear:"",placeholder:"请输入备注"},null,8,["value"])]),_:1}),t(a,{label:"内容",name:"content"},{default:i(()=>[B("div",Q,[t(W,{value:l.form.content,"onUpdate:value":n[4]||(n[4]=u=>l.form.content=u),height:300},null,8,["value"])])]),_:1})]),_:1},8,["model"]),t(G,{onSave:I,onClose:x})])}}},Y={class:"zy-view"},ee={__name:"view-page-info",props:{viewData:{type:Object,default:()=>{}}},emits:["close"],setup(c,{emit:w}){return console.log(c.viewData),(A,l)=>{const g=r("a-tag"),f=r("a-textarea");return b(),k("section",Y,[t(q,null,{default:i(()=>[t(h,{label:"封面"},{default:i(()=>[_(Z(c.viewData.coverImage),1)]),_:1}),t(h,{label:"标题"},{default:i(()=>[_(Z(c.viewData.title),1)]),_:1})]),_:1}),t(q,null,{default:i(()=>[t(h,{label:"分类"},{default:i(()=>[_(Z(c.viewData.category),1)]),_:1}),t(h,{label:"状态"},{default:i(()=>[t(g,{color:"#f70"},{default:i(()=>[_(Z(c.viewData.status),1)]),_:1})]),_:1})]),_:1}),t(q,null,{default:i(()=>[t(h,{label:"摘要"},{default:i(()=>[t(f,{value:c.viewData.summary,"onUpdate:value":l[0]||(l[0]=v=>c.viewData.summary=v),style:{width:"500px"},disabled:"",placeholder:"Autosize height based on content lines","auto-size":""},null,8,["value"])]),_:1})]),_:1})])}}},re={__name:"dir-page-info",setup(c){const w=[{title:"封面",dataIndex:"coverImage",ellipsis:!0,key:"coverImage",align:"center"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0,align:"center"},{title:"摘要",dataIndex:"summary",key:"summary",ellipsis:!0,align:"center"},{title:"分类",dataIndex:"category",key:"category",ellipsis:!0,align:"center"},{title:"状态",dataIndex:"status",key:"status",ellipsis:!0,align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",sorter:(a,s)=>{},align:"center"},{title:"操作",width:225,key:"action",align:"center",fixed:"right"}],e=D({show:{add:!1,edit:!1,view:!1},editTitle:"编辑用户",activeComponent:null,selectedRowKeys:[],updateData:{},resetData:{},viewData:{},query:{params:{},pagination:{current:1,pageSize:10,total:0,hideOnSinglePage:!0},sort:{columnKey:"createdAt",order:"ascend"}},dataList:[],loading:{spinning:!1,tip:"加载中"}}),A=a=>{e.selectedRowKeys=a},l=(a=1)=>{e.query.pagination.current=a,T()},g=()=>{l()},f=({current:a,pageSize:s})=>{e.query.pagination=D({current:a,pageSize:s}),T()},v=({columnKey:a,order:s})=>{e.query.sort=D({current:a,order:s}),T()},T=()=>{e.loading.spinning=!0,M(e.query);let a={data:{result:[{_id:"1",title:"Lorem Ipsum",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",summary:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",tags:["lorem","ipsum","dolor"],category:"General",coverImage:"image1.jpg",status:"draft",createdAt:"2023-07-06T10:30:00Z",updatedAt:"2023-07-06T10:30:00Z",publishedAt:null},{_id:"2",title:"Aenean tincidunt",content:"Aenean tincidunt ex sit amet consequat malesuada.",summary:"Aenean tincidunt ex sit amet consequat malesuada.",tags:["aenean","tincidunt","malesuada"],category:"Technology",coverImage:"image2.jpg",status:"published",createdAt:"2023-07-05T14:20:00Z",updatedAt:"2023-07-06T09:15:00Z",publishedAt:"2023-07-06T09:15:00Z"},{_id:"3",title:"Sed fermentum",content:"Sed fermentum libero ut fringilla pharetra.",summary:"Sed fermentum libero ut fringilla pharetra.",tags:["sed","fermentum","fringilla"],category:"Science",coverImage:"image3.jpg",status:"published",createdAt:"2023-07-04T16:45:00Z",updatedAt:"2023-07-05T11:10:00Z",publishedAt:"2023-07-05T11:10:00Z"},{_id:"4",title:"Nulla facilisi",content:"Nulla facilisi. Donec convallis diam vel maximus efficitur.",summary:"Nulla facilisi. Donec convallis diam vel maximus efficitur.",tags:["nulla","facilisi","convallis"],category:"General",coverImage:"image4.jpg",status:"draft",createdAt:"2023-07-03T09:20:00Z",updatedAt:"2023-07-03T09:20:00Z",publishedAt:null},{_id:"5",title:"Vestibulum at varius",content:"Vestibulum at varius dui, non maximus metus.",summary:"Vestibulum at varius dui, non maximus metus.",tags:["vestibulum","varius","dui"],category:"Technology",coverImage:"image5.jpg",status:"published",createdAt:"2023-07-02T14:30:00Z",updatedAt:"2023-07-04T09:45:00Z",publishedAt:"2023-07-04T09:45:00Z"},{_id:"6",title:"Praesent gravida",content:"Praesent gravida ipsum at lorem facilisis aliquam.",summary:"Praesent gravida ipsum at lorem facilisis aliquam.",tags:["praesent","gravida","facilisis"],category:"Science",coverImage:"image6.jpg",status:"published",createdAt:"2023-07-01T10:10:00Z",updatedAt:"2023-07-03T15:25:00Z",publishedAt:"2023-07-03T15:25:00Z"},{_id:"7",title:"Fusce tempus",content:"Fusce tempus velit vitae libero viverra lacinia.",summary:"Fusce tempus velit vitae libero viverra lacinia.",tags:["fusce","tempus","viverra"],category:"General",coverImage:"image7.jpg",status:"draft",createdAt:"2023-06-30T12:05:00Z",updatedAt:"2023-07-01T16:40:00Z",publishedAt:null},{_id:"8",title:"Aliquam erat volutpat",content:"Aliquam erat volutpat. Curabitur facilisis ullamcorper mauris ut efficitur.",summary:"Aliquam erat volutpat. Curabitur facilisis ullamcorper mauris ut efficitur.",tags:["aliquam","volutpat","curabitur"],category:"Technology",coverImage:"image8.jpg",status:"published",createdAt:"2023-06-29T08:15:00Z",updatedAt:"2023-07-02T13:20:00Z",publishedAt:"2023-07-02T13:20:00Z"},{_id:"9",title:"Morbi consequat",content:"Morbi consequat nibh vel nisi cursus ultrices.",summary:"Morbi consequat nibh vel nisi cursus ultrices.",tags:["morbi","consequat","nibh"],category:"Science",coverImage:"image9.jpg",status:"published",createdAt:"2023-06-28T14:50:00Z",updatedAt:"2023-06-30T10:30:00Z",publishedAt:"2023-06-30T10:30:00Z"},{_id:"10",title:"Etiam nec pharetra",content:"Etiam nec pharetra nunc, eu maximus diam.",summary:"Etiam nec pharetra nunc, eu maximus diam.",tags:["etiam","pharetra","maximus"],category:"General",coverImage:"image10.jpg",status:"draft",createdAt:"2023-06-27T11:25:00Z",updatedAt:"2023-06-27T11:25:00Z",publishedAt:null}],total:10,current:1,pageSize:15}};e.loading.spinning=!1;let s=a.data.result;for(const o of s)o.createdAt=C.formatTime(o.createdAt),o.updatedAt=C.formatTime(o.updatedAt),o.publishedAt=C.formatTime(o.publishedAt);e.dataList=s,e.query.pagination.total=a.data.total,e.query.pagination.current=a.data.current,e.query.pagination.pageSize=a.data.pageSize},I=(a,s,o)=>{E(a)||f(a),E(o)||v(o)},x=a=>{e.show.view=!0,e.viewData=a},m=a=>{e.show.edit=!0,a&&a._id?e.editTitle="修改文章":e.editTitle="添加文章",e.updateData=a},n=a=>{$("确认删除该条数据?").then(s=>{s&&F.success("删除成功"),l()})},d=a=>{e.show.add=!1,e.show.reset=!1,e.show.view=!1,e.show.edit=!1,a&&l()};return l(),(a,s)=>{const o=r("a-input"),u=r("a-form-item"),S=r("IconFont"),z=r("a-button"),N=r("a-image"),L=r("a-table");return b(),k("section",null,[t(H,{formValue:e.query.params,onSubmit:l,onReset:g},{default:i(()=>[t(u,{name:"name"},{default:i(()=>[t(o,{value:e.query.params.username,"onUpdate:value":s[0]||(s[0]=p=>e.query.params.username=p),allowClear:"",placeholder:"请输入标题",onPressEnter:l,autocomplete:"off"},null,8,["value"])]),_:1})]),_:1},8,["formValue"]),t(P,{onAdd:m,addAuth:"sys:user:create"},{default:i(()=>[t(z,{size:"small",type:"primary"},{default:i(()=>[t(S,{type:"icon-upload"}),_(" 导入 ")]),_:1}),t(z,{size:"small",type:"primary"},{default:i(()=>[t(S,{type:"icon-upload"}),_(" 导出 ")]),_:1})]),_:1}),t(L,{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:A},bordered:"",resizable:!0,loading:e.loading,columns:w,"row-key":p=>p._id,pagination:e.query.pagination,onChange:I,"row-class-name":(p,y)=>y%2===1?"table-striped":null,"data-source":e.dataList},{bodyCell:i(({column:p,record:y})=>[p.key==="avatar"?(b(),U(N,{key:0,width:40,src:y.avatar},null,8,["src"])):p.key==="action"?(b(),U(K,{key:1,onView:V=>x(y),onEdit:V=>m(y),onDelete:V=>n(y)},null,8,["onView","onEdit","onDelete"])):O("",!0)]),_:1},8,["row-selection","loading","row-key","pagination","row-class-name","data-source"]),t(j,{minWidth:650,show:e.show.edit,title:e.editTitle,key:"GetUserInfo",onClose:d},{default:i(()=>[t(X,{updateData:e.updateData,onClose:d},null,8,["updateData"])]),_:1},8,["show","title"]),t(j,{minWidth:650,show:e.show.view,title:"查看用户",key:"ViewUserInfo",onClose:d},{default:i(()=>[t(ee,{viewData:e.viewData,onClose:d},null,8,["viewData"])]),_:1},8,["show"])])}}};export{re as default};
